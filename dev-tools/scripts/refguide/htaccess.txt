# Existing pages moved to sub path in the 9.0 guide
RedirectMatch 301 ^/guide/(about-this-guide|relevance|solr-glossary|solr-tutorial)\.html /guide/solr/latest/getting-started/$1.html
RedirectMatch 301 ^/guide/(aliases|audit-logging|authentication-and-authorization-plugins|basic-authentication-plugin|circuit-breakers|client-apis|cloud-screens|cluster-node-management|collection-management|collections-core-admin|configuring-logging|enabling-ssl|hadoop-authentication-plugin|indexupgrader-tool|installing-solr|jvm-settings|jwt-authentication-plugin|kerberos-authentication-plugin|mbean-request-handler|metrics-reporting|performance-statistics-reference|ping|plugins-stats-screen|replica-management|rule-based-authorization-plugin|securing-solr|security-ui|shard-management|solr-control-script-reference|solrcloud-recoveries-and-write-tolerance|solrcloud-with-legacy-configuration-files|taking-solr-to-production|thread-dump|upgrading-a-solr-cluster|zookeeper-access-control|cert-authentication-plugin)\.html /guide/solr/latest/deployment-guide/$1.html
RedirectMatch 301 ^/guide/(analysis-screen|analyzers|charfilterfactories|content-streams|de-duplication|documents-screen|docvalues|dynamic-fields|field-properties-by-use-case|field-type-definitions-and-properties|field-types-included-with-solr|indexing-nested-documents|language-analysis|luke-request-handler|phonetic-matching|post-tool|reindexing|schema-api|schema-browser-screen|schema-designer|schemaless-mode|tokenizers|transforming-and-indexing-custom-json|language-detection|schema-elements|currencies-exchange-rates|indexing-with-update-handlers|indexing-with-tika)\.html /guide/solr/latest/indexing-guide/$1.html
RedirectMatch 301 ^/guide/(analytics-expression-sources|analytics-mapping-functions|analytics-reduction-functions|analytics|collapse-and-expand-results|common-query-parameters|computational-geometry|curve-fitting|dsp|exporting-result-sets|faceting|function-queries|graph-traversal|graph|highlighting|json-facet-api|json-faceting-domain-changes|json-query-dsl|json-request-api|learning-to-rank|loading|logs|machine-learning|math-expressions|math-start|matrix-math|morelikethis|numerical-analysis|other-parsers|pagination-of-results|probability-distributions|query-re-ranking|query-screen|regression|response-writers|result-grouping|scalar-math|search-sample|searching-nested-documents|simulations|spatial-search|spell-checking|statistics|stream-api|stream-decorator-reference|stream-evaluator-reference|stream-screen|stream-source-reference|streaming-expressions|suggester|term-vectors|time-series|transform|variables|vector-math|visualization|result-clustering|query-syntax-and-parsers|edismax-query-parser|sql-query|query-elevation-component|join-query-parser|document-transformers)\.html /guide/solr/latest/query-guide/$1.html
RedirectMatch 301 ^/guide/(codec-factory|collections-api|config-api|config-sets|configsets-api|configuring-solrconfig-xml|coreadmin-api|implicit-requesthandlers|libs|managed-resources|package-manager-internals|package-manager|realtime-get|request-parameters-api|resource-loading|solr-plugins|update-request-processors|v2-api|script-update-processor|core-discovery)\.html /guide/solr/latest/configuration-guide/$1.html
RedirectMatch 301 ^/guide/(major-changes-in-solr-7|major-changes-in-solr-8|solr-upgrade-notes)\.html /guide/solr/latest/upgrade-notes/$1.html
# Page renames between 8.x and 9.0
RewriteRule ^guide/9_0/solr-tutorial.html /guide/solr/latest/getting-started/solr-tutorial.html [R=301,NE,L]
RewriteRule ^guide/a-quick-overview.html /guide/solr/latest/getting-started/introduction.html [R=301,NE,L]
RewriteRule ^guide/about-filters.html /guide/solr/latest/indexing-guide/filters.html [R=301,NE,L]
RewriteRule ^guide/about-tokenizers.html /guide/solr/latest/indexing-guide/tokenizers.html [R=301,NE,L]
RewriteRule ^guide/aws-solrcloud-tutorial.html /guide/solr/latest/getting-started/tutorial-aws.html [R=301,NE,L]
RewriteRule ^guide/choosing-an-output-format.html /guide/solr/latest/deployment-guide/client-apis.html [R=301,NE,L]
RewriteRule ^guide/client-api-lineup.html /guide/solr/latest/deployment-guide/client-apis.html [R=301,NE,L]
RewriteRule ^guide/collection-aliasing.html /guide/solr/latest/deployment-guide/alias-management.html [R=301,NE,L]
RewriteRule ^guide/collection-specific-tools.html /guide/solr/latest/getting-started/solr-admin-ui.html [R=301,NE,L]
RewriteRule ^guide/combining-distribution-and-replication.html /guide/solr/latest/deployment-guide/user-managed-distributed-search.html [R=301,NE,L]
RewriteRule ^guide/command-line-utilities.html /guide/solr/latest/deployment-guide/zookeeper-utilities.html [R=301,NE,L]
RewriteRule ^guide/configuration-apis.html /guide/solr/latest/configuration-guide/config-api.html [R=301,NE,L]
RewriteRule ^guide/copying-fields.html /guide/solr/latest/indexing-guide/copy-fields.html [R=301,NE,L]
RewriteRule ^guide/core-specific-tools.html /guide/solr/latest/getting-started/solr-admin-ui.html [R=301,NE,L]
RewriteRule ^guide/datadir-and-directoryfactory-in-solrconfig.html /guide/solr/latest/configuration-guide/index-location-format.html [R=301,NE,L]
RewriteRule ^guide/defining-core-properties.html /guide/solr/latest/configuration-guide/core-discovery.html [R=301,NE,L]
RewriteRule ^guide/defining-fields.html /guide/solr/latest/indexing-guide/fields.html [R=301,NE,L]
RewriteRule ^guide/deployment-and-operations.html /guide/solr/latest/deployment-guide/installing-solr.html [R=301,NE,L]
RewriteRule ^guide/detecting-languages-during-indexing.html /guide/solr/latest/indexing-guide/language-detection.html [R=301,NE,L]
RewriteRule ^guide/distributed-requests.html /guide/solr/latest/deployment-guide/solrcloud-distributed-requests.html [R=301,NE,L]
RewriteRule ^guide/distributed-search-with-index-sharding.html /guide/solr/latest/deployment-guide/user-managed-distributed-search.html [R=301,NE,L]
RewriteRule ^guide/documents-fields-and-schema-design.html /guide/solr/latest/indexing-guide/fields.html [R=301,NE,L]
RewriteRule ^guide/files-screen.html /guide/solr/latest/configuration-guide/configuration-files.html [R=301,NE,L]
RewriteRule ^guide/filter-descriptions.html /guide/solr/latest/indexing-guide/filters.html [R=301,NE,L]
RewriteRule ^guide/format-of-solr-xml.html /guide/solr/latest/configuration-guide/configuring-solr-xml.html [R=301,NE,L]
RewriteRule ^guide/further-assistance.html https://solr.apache.org/community.html [R=301,NE,L]
RewriteRule ^guide/getting-started-with-solrcloud.html /guide/solr/latest/getting-started/tutorial-solrcloud.html [R=301,NE,L]
RewriteRule ^guide/getting-started.html /guide/solr/latest/getting-started/introduction.html [R=301,NE,L]
RewriteRule ^guide/how-solrcloud-works.html /guide/solr/latest/deployment-guide/cluster-types.html#solrcloud-mode [R=301,NE,L]
RewriteRule ^guide/how-to-contribute.html https://solr.apache.org/community.html#how-to-contribute [R=301,NE,L]
RewriteRule ^guide/index-replication.html /guide/solr/latest/deployment-guide/user-managed-index-replication.html [R=301,NE,L]
RewriteRule ^guide/indexconfig-in-solrconfig.html /guide/solr/latest/configuration-guide/index-segments-merging.html [R=301,NE,L]
RewriteRule ^guide/indexing-and-basic-data-operations.html /guide/solr/latest/indexing-guide/indexing-with-update-handlers.html [R=301,NE,L]
RewriteRule ^guide/initparams-in-solrconfig.html /guide/solr/latest/configuration-guide/initparams.html [R=301,NE,L]
RewriteRule ^guide/introduction-to-client-apis.html /guide/solr/latest/deployment-guide/client-apis.html [R=301,NE,L]
RewriteRule ^guide/introduction-to-scaling-and-distribution.html /guide/solr/latest/deployment-guide/cluster-types.html#user-managed-mode [R=301,NE,L]
RewriteRule ^guide/introduction-to-solr-indexing.html /guide/solr/latest/getting-started/solr-indexing.html [R=301,NE,L]
RewriteRule ^guide/java-properties.html /guide/solr/latest/deployment-guide/jvm-settings.html [R=301,NE,L]
RewriteRule ^guide/legacy-scaling-and-distribution.html /guide/solr/latest/deployment-guide/cluster-types.html#user-managed-mode [R=301,NE,L]
RewriteRule ^guide/local-parameters-in-queries.html /guide/solr/latest/query-guide/local-params.html [R=301,NE,L]
RewriteRule ^guide/logging.html /guide/solr/latest/deployment-guide/configuring-logging.html [R=301,NE,L]
RewriteRule ^guide/major-changes-from-solr-5-to-solr-6.html /guide/solr/latest/upgrade-notes/major-changes-in-solr-6.html [R=301,NE,L]
RewriteRule ^guide/making-and-restoring-backups.html /guide/solr/latest/deployment-guide/backup-restore.html [R=301,NE,L]
RewriteRule ^guide/merging-indexes.html /guide/solr/latest/configuration-guide/coreadmin-api.html [R=301,NE,L]
RewriteRule ^guide/monitoring-solr-with-prometheus-and-grafana.html /guide/solr/latest/deployment-guide/monitoring-with-prometheus-and-grafana.html [R=301,NE,L]
RewriteRule ^guide/monitoring-solr.html /guide/solr/latest/deployment-guide/configuring-logging.html [R=301,NE,L]
RewriteRule ^guide/near-real-time-searching.html /guide/solr/latest/configuration-guide/commits-transaction-logs.html [R=301,NE,L]
RewriteRule ^guide/other-schema-elements.html /guide/solr/latest/indexing-guide/schema-elements.html [R=301,NE,L]
RewriteRule ^guide/overview-of-documents-fields-and-schema-design.html /guide/solr/latest/getting-started/documents-fields-schema-design.html [R=301,NE,L]
RewriteRule ^guide/overview-of-searching-in-solr.html /guide/solr/latest/getting-started/searching-in-solr.html [R=301,NE,L]
RewriteRule ^guide/overview-of-the-solr-admin-ui.html /guide/solr/latest/getting-started/solr-admin-ui.html [R=301,NE,L]
RewriteRule ^guide/parallel-sql-interface.html /guide/solr/latest/query-guide/sql-query.html [R=301,NE,L]
RewriteRule ^guide/parameter-reference.html /guide/solr/latest/configuration-guide/configuring-solr-xml.html [R=301,NE,L]
RewriteRule ^guide/query-settings-in-solrconfig.html /guide/solr/latest/configuration-guide/caches-warming.html [R=301,NE,L]
RewriteRule ^guide/query-syntax-and-parsing.html /guide/solr/latest/query-guide/query-syntax-and-parsers.html [R=301,NE,L]
RewriteRule ^guide/replication-screen.html /guide/solr/latest/deployment-guide/user-managed-index-replication.html [R=301,NE,L]
RewriteRule ^guide/requestdispatcher-in-solrconfig.html /guide/solr/latest/configuration-guide/requestdispatcher.html [R=301,NE,L]
RewriteRule ^guide/requesthandlers-and-searchcomponents-in-solrconfig.html /guide/solr/latest/configuration-guide/requesthandlers-searchcomponents.html [R=301,NE,L]
RewriteRule ^guide/running-solr-on-hdfs.html /guide/solr/latest/deployment-guide/solr-on-hdfs.html [R=301,NE,L]
RewriteRule ^guide/running-your-analyzer.html /guide/solr/latest/indexing-guide/analysis-screen.html [R=301,NE,L]
RewriteRule ^guide/schema-factory-definition-in-solrconfig.html /guide/solr/latest/configuration-guide/schema-factory.html [R=301,NE,L]
RewriteRule ^guide/searching.html /guide/solr/latest/query-guide/query-syntax-and-parsers.html [R=301,NE,L]
RewriteRule ^guide/segments-info.html /guide/solr/latest/configuration-guide/index-segments-merging.html [R=301,NE,L]
RewriteRule ^guide/setting-up-an-external-zookeeper-ensemble.html /guide/solr/latest/deployment-guide/zookeeper-ensemble.html [R=301,NE,L]
RewriteRule ^guide/shards-and-indexing-data-in-solrcloud.html /guide/solr/latest/deployment-guide/solrcloud-shards-indexing.html [R=301,NE,L]
RewriteRule ^guide/solr-configuration-files.html /guide/solr/latest/configuration-guide/configuration-files.html [R=301,NE,L]
RewriteRule ^guide/solr-cores-and-solr-xml.html /guide/solr/latest/configuration-guide/core-discovery.html [R=301,NE,L]
RewriteRule ^guide/solr-field-types.html /guide/solr/latest/indexing-guide/field-type-definitions-and-properties.html [R=301,NE,L]
RewriteRule ^guide/solr-jdbc-apache-zeppelin.html /guide/solr/latest/query-guide/jdbc-zeppelin.html [R=301,NE,L]
RewriteRule ^guide/solr-jdbc-dbvisualizer.html /guide/solr/latest/query-guide/jdbc-dbvisualizer.html [R=301,NE,L]
RewriteRule ^guide/solr-jdbc-python-jython.html /guide/solr/latest/query-guide/jdbc-python-jython.html [R=301,NE,L]
RewriteRule ^guide/solr-jdbc-r.html /guide/solr/latest/query-guide/jdbc-r.html [R=301,NE,L]
RewriteRule ^guide/solr-jdbc-squirrel-sql.html /guide/solr/latest/query-guide/jdbc-squirrel.html [R=301,NE,L]
RewriteRule ^guide/solr-system-requirements.html /guide/solr/latest/deployment-guide/system-requirements.html [R=301,NE,L]
RewriteRule ^guide/solr-tracing.html /guide/solr/latest/deployment-guide/distributed-tracing.html [R=301,NE,L]
RewriteRule ^guide/solrcloud-configuration-and-parameters.html /guide/solr/latest/deployment-guide/solrcloud-shards-indexing.html [R=301,NE,L]
RewriteRule ^guide/solrcloud-query-routing-and-read-tolerance.html /guide/solr/latest/deployment-guide/solrcloud-distributed-requests.html [R=301,NE,L]
RewriteRule ^guide/solrcloud-resilience.html /guide/solr/latest/deployment-guide/solrcloud-recoveries-and-write-tolerance.html [R=301,NE,L]
RewriteRule ^guide/solrcloud.html /guide/solr/latest/deployment-guide/cluster-types.html#solrcloud-mode [R=301,NE,L]
RewriteRule ^guide/the-dismax-query-parser.html /guide/solr/latest/query-guide/dismax-query-parser.html [R=301,NE,L]
RewriteRule ^guide/the-extended-dismax-query-parser.html /guide/solr/latest/query-guide/edismax-query-parser.html [R=301,NE,L]
RewriteRule ^guide/the-query-elevation-component.html /guide/solr/latest/query-guide/query-elevation-component.html [R=301,NE,L]
RewriteRule ^guide/the-standard-query-parser.html /guide/solr/latest/query-guide/standard-query-parser.html [R=301,NE,L]
RewriteRule ^guide/the-stats-component.html /guide/solr/latest/query-guide/stats-component.html [R=301,NE,L]
RewriteRule ^guide/the-tagger-handler.html /guide/solr/latest/query-guide/tagger-handler.html [R=301,NE,L]
RewriteRule ^guide/the-term-vector-component.html /guide/solr/latest/query-guide/term-vector-component.html [R=301,NE,L]
RewriteRule ^guide/the-terms-component.html /guide/solr/latest/query-guide/terms-component.html [R=301,NE,L]
RewriteRule ^guide/the-well-configured-solr-instance.html /guide/solr/latest/configuration-guide/configuration-files.html [R=301,NE,L]
RewriteRule ^guide/transforming-result-documents.html /guide/solr/latest/query-guide/document-transformers.html [R=301,NE,L]
RewriteRule ^guide/understanding-analyzers-tokenizers-and-filters.html /guide/solr/latest/indexing-guide/document-analysis.html [R=301,NE,L]
RewriteRule ^guide/updatehandlers-in-solrconfig.html /guide/solr/latest/configuration-guide/commits-transaction-logs.html [R=301,NE,L]
RewriteRule ^guide/updating-parts-of-documents.html /guide/solr/latest/indexing-guide/partial-document-updates.html [R=301,NE,L]
RewriteRule ^guide/uploading-data-with-index-handlers.html /guide/solr/latest/indexing-guide/indexing-with-update-handlers.html [R=301,NE,L]
RewriteRule ^guide/uploading-data-with-solr-cell-using-apache-tika.html /guide/solr/latest/indexing-guide/indexing-with-tika.html [R=301,NE,L]
RewriteRule ^guide/using-javascript.html /guide/solr/latest/deployment-guide/javascript.html [R=301,NE,L]
RewriteRule ^guide/using-jmx-with-solr.html /guide/solr/latest/deployment-guide/jmx-with-solr.html [R=301,NE,L]
RewriteRule ^guide/using-python.html /guide/solr/latest/deployment-guide/python.html [R=301,NE,L]
RewriteRule ^guide/using-solr-from-ruby.html /guide/solr/latest/deployment-guide/ruby.html [R=301,NE,L]
RewriteRule ^guide/using-solrj.html /guide/solr/latest/deployment-guide/solrj.html [R=301,NE,L]
RewriteRule ^guide/using-the-solr-administration-user-interface.html /guide/solr/latest/getting-started/solr-admin-ui.html [R=301,NE,L]
RewriteRule ^guide/using-zookeeper-to-manage-configuration-files.html /guide/solr/latest/deployment-guide/zookeeper-file-management.html [R=301,NE,L]
RewriteRule ^guide/working-with-currencies-and-exchange-rates.html /guide/solr/latest/indexing-guide/currencies-exchange-rates.html [R=301,NE,L]
RewriteRule ^guide/working-with-dates.html /guide/solr/latest/indexing-guide/date-formatting-math.html [R=301,NE,L]
RewriteRule ^guide/working-with-enum-fields.html /guide/solr/latest/indexing-guide/enum-fields.html [R=301,NE,L]
RewriteRule ^guide/working-with-external-files-and-processes.html /guide/solr/latest/indexing-guide/external-files-processes.html [R=301,NE,L]
RewriteRule ^guide/fields-and-schema-design.html /guide/solr/latest/indexing-guide/schema-elements.html [R=301,NE,L]
RewriteRule ^guide/deployment-guide.html /guide/solr/latest/deployment-guide/system-requirements.html [R=301,NE,L]
RewriteRule ^guide/neural-search.html /guide/solr/latest/query-guide/dense-vector-search.html [R=301,NE,L]
RewriteRule ^guide/real-time-get.html /guide/solr/latest/configuration-guide/realtime-get.html [R=301,NE,L]
# Removed pages redirected to latest 8.x guide
RedirectMatch 301 ^/guide/(adding-custom-plugins-in-solrcloud-mode|blob-store-api|blockjoin-faceting|cdcr-api|cdcr-architecture|cdcr-config|cdcr-operations|colocating-collections|cross-data-center-replication-cdcr|dataimport-screen|errata|metrics-history|migrate-to-policy-rule|putting-the-pieces-together|rule-based-replica-placement|solrcloud-autoscaling-api|solrcloud-autoscaling-auto-add-replicas|solrcloud-autoscaling-fault-tolerance|solrcloud-autoscaling-listeners|solrcloud-autoscaling-overview|solrcloud-autoscaling-policy-preferences|solrcloud-autoscaling-trigger-actions|solrcloud-autoscaling-triggers|solrcloud-autoscaling|suggestions-screen|uploading-structured-data-store-data-with-the-data-import-handler|velocity-response-writer|velocity-search-ui)\.html /guide/8_11/$1.html
# Paths we could not map


# Do not index old reference guide pages on search engines, except for pages that don't exist in 9+
<If "%{REQUEST_URI} =~ m#/guide/(6|7|8)_.*# && %{REQUEST_URI} !~ m#/guide/8_11/(adding-custom-plugins-in-solrcloud-mode|blob-store-api|blockjoin-faceting|cdcr-api|cdcr-architecture|cdcr-config|cdcr-operations|colocating-collections|cross-data-center-replication-cdcr|dataimport-screen|errata|metrics-history|migrate-to-policy-rule|putting-the-pieces-together|rule-based-replica-placement|solrcloud-autoscaling-api|solrcloud-autoscaling-auto-add-replicas|solrcloud-autoscaling-fault-tolerance|solrcloud-autoscaling-listeners|solrcloud-autoscaling-overview|solrcloud-autoscaling-policy-preferences|solrcloud-autoscaling-trigger-actions|solrcloud-autoscaling-triggers|solrcloud-autoscaling|suggestions-screen|uploading-structured-data-store-data-with-the-data-import-handler|velocity-response-writer|velocity-search-ui)\.html$#">
  Header set X-Robots-Tag "noindex,nofollow,noarchive"
</If>
